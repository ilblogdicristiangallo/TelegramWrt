#!/bin/sh
echo "ðŸ“¡ All devices seen by the router"
echo ""

# .... ARP Table (LAN, bridge, static IPs)
echo "ðŸ–§ ARP Table:"
cat /proc/net/arp | awk 'NR>1 {printf "ðŸŒ IP: %s | ðŸ”‘ MAC: %s | ðŸ–¥ Interface: %s\n", $1, $4, $6}'
echo ""

# .... Wi-Fi Clients ... wlan0
WLAN_IFACE="$(uci get wireless.@wifi-iface[0].device 2>/dev/null)"
if [ -n "$WLAN_IFACE" ]; then
    echo "ðŸ“¶ Wi-Fi Clients ($WLAN_IFACE):"
    iwinfo "$WLAN_IFACE" assoclist 2>/dev/null | grep -Eo '([A-Fa-f0-9]{2}:){5}[A-Fa-f0-9]{2}' | while read mac; do
        echo "ðŸ”— MAC: $mac"
    done
else
    echo "âš ï¸ Wi-Fi interface not found via UCI"
fi
echo ""

# .... Wi-Fi Clients ... phy1-ap0
echo "ðŸ“¶ Wi-Fi Clients (phy1-ap0):"
iwinfo phy1-ap0 assoclist 2>/dev/null | grep -Eo '([A-Fa-f0-9]{2}:){5}[A-Fa-f0-9]{2}' | while read mac; do
    echo "ðŸ”— MAC: $mac"
done
echo ""

# .... Wi-Fi Clients ... phy0-ap0
echo "ðŸ“¶ Wi-Fi Clients (phy0-ap0):"
iwinfo phy0-ap0 assoclist 2>/dev/null | grep -Eo '([A-Fa-f0-9]{2}:){5}[A-Fa-f0-9]{2}' | while read mac; do
    echo "ðŸ”— MAC: $mac"
done
echo ""
